<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<title>充值</title>
<link href="css/style.css" rel="stylesheet" type="text/css" />
<script src="css/jquery.js" type="text/javascript"></script>
<script language="javascript">

	var uname="";
	var chargecount="";
	var orderid="";
	var token="";
	var res = "";
	$(function(){
	
		$("#auth1").click(function(){
			auth();
		});
		
		$("#auth2").click(function(){
			auth2();
		});
		
	});
		var url = window.location.href;
		var ary = url.split("?");
		if(ary.length>1){
			orderid = ary[1];
		}
		$.ajax({
			type:'post',
			dataType:'json',
			url:'../chongzhiServlet?'+orderid,
			data:'',
			success:function(data){
				uname=data.name;
				chargecount=data.chargeccount;
				orderid=data.orderid;
				document.getElementById("money").innerHTML=data.chargeccount*100;
				document.getElementById("hello").innerHTML=data.name;
				document.getElementById("un").innerHTML=data.name;
				document.getElementById("price").value=data.chargeccount;
				document.getElementById("price").innerHTML=data.chargeccount;
				
				document.getElementById("accountId").value=data.name;
				document.getElementById("userkey").value=data.name;
				document.getElementById("orderid").value=data.orderid;
				document.getElementById("transAmt").value=data.chargeccount*100;
				document.getElementById("bill_no").value=data.orderid;
				document.getElementById("login_name").value=uname;
				
				document.getElementById("transAmt1").value=data.chargeccount*100;
				document.getElementById("bill_no1").value=data.orderid;
				document.getElementById("login_name1").value=uname;
				
				/* document.getElementById("transAmt6").value=data.chargeccount/100;
				document.getElementById("bill_no6").value=data.orderid;
				document.getElementById("login_name6").value=uname; */
				
				document.getElementById("accountId1").value=data.name;
				document.getElementById("userkey1").value=data.name;
				document.getElementById("orderid1").value=data.orderid;
				document.getElementById("transAmt2").value=data.chargeccount;
				document.getElementById("transAmt3").value=data.chargeccount;
				//最近充值记录
	$.ajax({
		type:'post',
		dataType:'json',
		url:'../recordServlet?',
		data:'name='+uname,
		success:function (data){
			var date = data.date;
			if(date!=null){
				for(var i=0;i<date.length;i++){
					$("#czjl").append("<font>"+date[i].starttime+"&nbsp;&nbsp;"+date[i].chargeccount+"</font><br/>");
				}
			}
			
		},
		error:function(data){
			var date = data.date;
			if(date!=null){
				for(var i=0;i<date.length;i++){
					$("#czjl").append("<font>"+date[i].starttime+"&nbsp;&nbsp;"+date[i].chargeccount+"</font><br/>");
				}
			}
		}
	});
			}
		});
	//产生随机数
	function rand(){
		res="";
		var chars = ['0','1','2','3','4','5','6','7','8','9','A','B','C','D','E','F','G','H','I','J','K','L','M','N','O','P','Q','R','S','T','U','V','W','X','Y','Z','a','b','c','d','e','f','g','h','y','j','k','l','m','n','o','p','q','r','s','t','u','v','w','x','y','z'];
		for(var i=0;i<8;i++){
			var id=Math.ceil(Math.random()*61);
			res+=chars[id];
		}
		return res;
	}
	 function auth(){
		rand();
		$.ajax({
			async:false,
			type:'post',
			dataType:'text',
			url:'../authCode?',
			data:'channelId=7&accountId='+uname+'&categoryId=01&mobile='+document.chongzhi1.mobile.value+'&randnum='+res,
			success:function(data){
			}
		});
		getVerifyCodeCountdown(59,1);
	}
	var getVerifyCodeTimeout;
	//获取验证码倒计时
	function getVerifyCodeCountdown(a,b){
		if(a>0){
			a=a-1;
			if(b==0){
				$("#auth1").css("display","none");
				$("#unauth1").css("display","").text(a+"秒后重新获取");
			}else{
				$("#auth1").css("display","none");
				$("#unauth1").css("display","").text(a+"秒后重新获取");
			}
				getVerifyCodeTimeout=setTimeout("getVerifyCodeCountdown("+a+","+b+")",1000);
		}else{
				clearTimeout(getVerifyCodeTimeout);
				if(b==0){
					$("#auth1").css("display","");
					$("#unauth1").css("display","none");
				}else{
					$("#auth1").css("display","");
					$("#unauth1").css("display","none");
				}
		}
	}
		
		//获取验证码倒计时
	function getVerifyCodeCountdown2(a,b){
		if(a>0){
			a=a-1;
			if(b==0){
				$("#auth2").css("display","none");
				$("#unauth2").css("display","").text(a+"秒后重新获取");
			}else{
				$("#auth2").css("display","none");
				$("#unauth2").css("display","").text(a+"秒后重新获取");
			}
			getVerifyCodeTimeout=setTimeout("getVerifyCodeCountdown2("+a+","+b+")",1000);
		}else{
			clearTimeout(getVerifyCodeTimeout);
			if(b==0){
				$("#auth2").css("display","");
				$("#unauth2").css("display","none");
			}else{
				$("#auth2").css("display","");
				$("#unauth2").css("display","none");
			}
		}
    }
	function auth2(){
		rand();
		$.ajax({
			async:false,
			type:'post',
			dataType:'text',
			url:'../authCode?',
			data:'channelId=7&accountId='+uname+'&categoryId=01&mobile='+document.chongzhi2.mobile.value+'&randnum='+res,
			success:function(data){
			}
		});
		getVerifyCodeCountdown2(59,1);
	}
	function clear(){
		document.chongzhi1.mobile.value="";
	}
</script>
</head>

<body>
<div class="iBody">
  <h1 class="logo"><a href="index.html"><img src="images/logo.png" /></a></h1>
  <p class="headright"><a href="#" class="icon1">加入收藏</a><a href="#" class="icon2">下载客户端</a></p>
</div>
<div class="iBody">
<form name="user">
  <div class="cz-left">
    <h4 class="tit4">用户信息</h4>
    <div class="conts">
      <p><span class="red">您好：</span><span id="hello"></span> <a href="javascript:history.go(-1)" class="red">[返回上一级]</a></p>
      <p><span class="red">最近充值记录：</span>
      	<span id='czjl' style="overflow-y: auto;height: 150px;display: block;"
      	></span>
      </p>
    </div>
    <h4 class="tit4">投诉与建议</h4>
    <div class="conts">
      <p><span class="red">TEl：</span>010-60676767</p>
      <p><span class="red">MAIL：</span>投诉与建议 </p>
      <p><span class="red">工作时间：</span>08:00-23:00 </p>
    </div>
  </div>
 </form>
  <div class="cz-right">
    <h4 class="tit4">用户充值</h4>
    <div class="conts2">
    <form name="priceform">
      <p>账户余额：0</p>
      <p>充值账号：<span id="un">LIUXIN </span> <!-- <a href="#" class="red">[修改]</a> <span class="msg-ml"> 点击修改可以为其它账号充值</span> --> </p>
      <p>六币数量：
       <span id="money"></span>
      </p>
      <p>支付金额：
       <span id="price"></span>
      </p>
      </form>
      <p class="line"></p>
      <div class="chongzhi-bar">全部充值方式：<span name="#cz5">支付宝充值</span><span name="#cz4">电话卡充值</span><!-- <span name="#cz6" class="but4">网银充值</span> --><span name="#cz1">储蓄卡充值</span><span name="#cz2">信用卡充值</span><!-- <span name="#cz3">手机包月</span>--> </div>
     
     <!--  <div class="chongzhicont" id="cz6">
       <form name="chongzhi6"  action="../chargeServletIfeng" method="post">
      <input id="transAmt6" name="transAmt" type="hidden" value=""/>
      <input name="subject" type="hidden" value="六币"/>
       <input id="bill_no6" name="bill_no" type="hidden" value=""/>
        <input id="login_name6" name="login_name" type="hidden" value=""/>
       <p>
       <label class="lab"><input name="payment_method" type="radio" value="14" /><img src="images/99bill.jpg" height="27" /></label>
       <label class="lab"><input name="payment_method" type="radio" value="1" /><img src="images/yeepay.jpg" height="27" /></label>
       <label class="lab"><input name="payment_method" type="radio" value="21" /><img src="images/icbc.jpg" height="27" /></label><br />
       <label class="lab"><input name="payment_method" type="radio" value="22" /><img src="images/cmb.jpg" height="27" /></label>
       <label class="lab"><input name="payment_method" type="radio" value="23" /><img src="images/abc.jpg" height="27" /></label>
       <label class="lab"><input name="payment_method" type="radio" value="24" /><img src="images/ccb.jpg" height="27" /></label><br />
       <label class="lab"><input name="payment_method" type="radio" value="28" /><img src="images/boc.jpg" height="27" /></label>
       <label class="lab"><input name="payment_method" type="radio" value="29" /><img src="images/bocom.jpg" height="27" /></label>
       <label class="lab"><input name="payment_method" type="radio" value="30" /><img src="images/cmbc.jpg" height="27" /></label><br />
       <label class="lab"><input name="payment_method" type="radio" value="31" /><img src="images/cib.jpg" height="27" /></label>
       </p>
      <p class="butmar1">
        <input name="" type="submit" class="but2" value="提交" />
      </p>
     	</form>
     </div> -->
      <div class="chongzhicont" id="cz5">
     <form name="chongzhi5" action="../chargeServletIfeng" method="post">
     <input id="transAmt3" name="transAmt" type="hidden" value=""/>
     <input id="" name="" type="hidden" value=""/>
       <p><label class="lab"><input name="" type="radio" value="" /><img src="images/log-logo5.jpg" /></label></p>
      <p class="butmar1">
      <input name="body" type="hidden" value="body"/>
      <input name="show_url" type="hidden" value="show_url"/>
      <input name="payment_method" type="hidden" value="13"/>
      <input name="subject" type="hidden" value="六币"/>
       <input id="bill_no" name="bill_no" type="hidden" value=""/>
        <input id="login_name" name="login_name" type="hidden" value=""/>
        <input name="submit" type="submit" class="but2" value="提交" />
      </p>
      </form>
     </div>
     <div class="chongzhicont" id="cz1">
     <form name="chongzhi1"  action="../chargeServlet" method="post">
     	<span id="fail"></span>
     	<input id="typeId" name="typeId" type="hidden" value="1"/>
     	<input id="accountId" name="accountId" type="hidden" value=""/>
     	<input id="userkey" name="userkey" type="hidden" value=""/>
     	<input id="orderid" name="orderid" type="hidden" value=""/>
     	<input id="transAmt" name="transAmt" type="hidden" value=""/>
       <p>卡　号：
         <input name="cardNo" type="text" class="input1 wit1" id="textfield" size="21"/>
       </p>
      <p>姓　名：
        <input name="usrName" type="text" class="input1 wit２" id="textfield" size="21" />
      </p>
       <p>手机号：
         <input name="mobile" type="text" class="input1 wit1" id="textfield" value="银行预留手机号" size="21" onclick="if(this.value=='银行预留手机号'){this.value='';}"/>
        <input id="auth1" name="input" type="button" class="but2" value="获取验证码"/>
        <span id="unauth1"></span>
        <!--  onclick="auth()" -->
      </p>
      <p>验证码：
        <input name="authCode" type="text"  class="input1 wit2" id="textfield2" size="8" />
      </p>
      <p class="butmar1">
        <input name="" type="submit" class="but2" value="提交" />
      </p>
      </form>
     </div>
     
     <div class="chongzhicont" id="cz2">
     <form name="chongzhi2" action="../chargeServlet" method="post">
     	<input id="accountId1" name="accountId" type="hidden" value=""/>
     	<input id="userkey1" name="userkey" type="hidden" value=""/>
     	<input id="orderid1" name="orderid" type="hidden" value=""/>
     	<input id="transAmt1" name="transAmt" type="hidden" value=""/>
     <span name="fail2"></span>
     <input name="typeId" type="hidden" value="2"/>
       <p>卡　号：
         <input name="cardNo" type="text" class="input1 wit1" id="textfield" size="21" />
       </p>
      <p>姓　名：
        <input name="usrName" type="text" class="input1 wit２" id="textfield" size="21" />
      </p>
      <p>CVV码：
        <input name="cvvCode" type="text" class="input1 wit２" id="textfield" size="21" /> <span class="gray">（卡背面3位数字）</span>
      </p>
      <p>有效期：
        <input name="period" type="text" class="input1 wit２" id="textfield" size="21" /> <span class="gray">（例如：1404表示2014年4月）</span>
      </p>
       <p>手机号：
         <input name="mobile" type="text" class="input1 wit1" id="textfield" value="银行预留手机号" size="21" onclick="if(this.value=='银行预留手机号'){this.value='';}"/>
        <input id="auth2" name="input" type="button" class="but2" value="获取验证码" />
      	<span id="unauth2"></span>
      </p>
      <p>验证码：
        <input name="authCode" type="text"  class="input1 wit2" id="textfield2" size="8" />
      </p>
      <p class="butmar1">
        <input name="" type="submit" class="but2" value="提交" />
      </p>
      </form>
     </div>
     <!-- 
     <div class="chongzhicont" id="cz3">
     <form name="chongzhi3">
     <p>手机号：
        <input name="textfield" type="text" class="input1 wit1" id="textfield" size="21" />
        <input name="input" type="button" class="but3" value="获取验证码" />
      </p>
      <p>验证码：
        <input name="textfield2" type="text"  class="input1 wit2" id="textfield2" size="8" />
      </p>
      <p class="butmar1">
        <input name="" type="button" class="but2" value="提交" onblur="allmobile()"/>
      </p>
      </form>
     </div>
      -->
     <div class="chongzhicont" id="cz4">
     <form name="chongzhi4" action="../chargeServletIfeng" method="post">
      <input id="transAmt2" name="transAmt" type="hidden" value=""/>
      <input name="subject" type="hidden" value="六币"/>
       <input id="bill_no1" name="bill_no" type="hidden" value=""/>
        <input id="login_name1" name="login_name" type="hidden" value=""/>
       <p><label class="lab"><input name="payment_method" type="radio" value="36" /><img src="images/log-logo1.jpg" /></label><label class="lab"><input name="payment_method" type="radio" value="37" /><img src="images/log-logo2.jpg" /></label><label class="lab"><input name="payment_method" type="radio" value="38" /><img src="images/log-logo3.jpg" /></label></p>
      <p>
<label class="lab"><input name="payment_method" type="radio" value="27" /><img src="images/log-logo4.jpg" /></label></p>
      <p class="butmar1">
        <input name="" type="submit" class="but2" value="提交"/>
      </p>
      </form>
     </div>
      <div class="banklist">
        <p class="line2"><span class="bit red">储蓄卡支持银行：</span>工商银行、农业银行、建设银行、民生银行、兴业银行、深发银行、中信银行、光大银行</p>
        <p><span class="bit red">信用卡支持银行：</span><span>工商银行、农业银行、中国银行、建设银行、交通银行、深发银行、招商银行、兴业银行、民生银行、广发银行、中信银行、邮储银行、光大银行、浦发银行、上海银行、华夏银行
</span></p>
      </div>
    </div>
  </div>
</div>
<div class="footer mar-top40"> <span class="logo"><a href="http://mm.yue.ifeng.com"><img src="images/logo.png" /></a></span>
  <p><a href="http://www.ifeng.com/corp/about/">关于凤凰新媒体</a> |<a href="http://mm.yue.ifeng.com
"> 秀场首页</a> | <a href="http://yue.ifeng.com">音乐首页</a> | <span style="color:#000">客服电话:4008109890 | 客服邮箱: wireless@ifeng.com</span><br />
    [<a href="images/icp.jpg">京ICP证030609号</a>] [<a href="images/wlwhjy.jpg">文网文[2010]136号</a>]<br />
    凤凰新媒体 版权所有<br />
  Copyright © 2013 Phoenix New Media Limited All Rights Reserved.</p>
</div>
 <script>
    function resetTabs(){
        $(".chongzhicont").hide(); //Hide all content
        $(".chongzhi-bar span").attr("class",""); //Reset id's      
    }

    var myUrl = window.location.href; //get URL
    var myUrlTab = myUrl.substring(myUrl.indexOf("#")); // For localhost/tabs.html#tab2, myUrlTab = #tab2     
    var myUrlTabName = myUrlTab.substring(0,4); // For the above example, myUrlTabName = #tab

    (function(){
        $(".chongzhicont").hide(); // Initially hide all content
        $(".chongzhi-bar span:first").attr("class","but4"); // Activate first tab
        $(".chongzhicont:first").fadeIn(); // Show first tab content
        
        $(".chongzhi-bar span").on("click",function(e) {
            e.preventDefault();
            if ($(this).attr("class") == "but4"){ //detection for current tab
             return       
            }
            else{             
            resetTabs();
            $(this).attr("class","but4"); // Activate this
            $($(this).attr('name')).fadeIn(); // Show content for current tab
            }
        });

        for (i = 1; i <= $(".chongzhi-bar span").length; i++) {
          if (myUrlTab == myUrlTabName + i) {
              resetTabs();
              $("a[name='"+myUrlTab+"']").attr("class","but4"); // Activate url tab
              $(myUrlTab).fadeIn(); // Show url tab content        
          }
        }
    })()
  </script> 
</body>
</html>
